(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{142:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(157),i=a(326),s=a(154),l=a(147),o=function(e){var t=e.children;return r.a.createElement(l.StaticQuery,{query:"2559738656",render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{showTitle:!1,siteTitle:e.site.siteMetadata.title}),t,r.a.createElement("div",null,"Footer"))},data:i})},u=a(327),m=a(411),d=a(413),p=(a(414),a(415),a(79),a(416)),f=function(){var e=Object(n.useState)([]),t=e[0],a=e[1],r=Object(n.useState)([]),c=r[0],i=r[1],s=Object(n.useState)(!1),o=s[0],u=s[1],m=Object(n.useState)(null),d=m[0],f=m[1],g=Object(n.useState)({}),h=g[0],b=g[1],y=Object(n.useState)("pattybot-web"+Date.now())[0],E=Object(n.useState)([]),v=E[0],N=E[1],w=Object(n.useState)(null),x=w[0],k=w[1],S=Object(n.useRef)(c);S.current=c;var j=Object(n.useRef)(v);j.current=v;var O=function(e){a([].concat(t,e))},P=function(e){return{avatar:Object(l.withPrefix)("/img/patty_avatar_small.png"),position:"left",title:"Patty:",type:"text",text:e,date:new Date}};return Object(n.useEffect)(function(){O([P("Hola! I'm Patty."),P("If you have questions about Andalusia, you've come to the right place."),P("You can ask me a question, or just do a search."),P("Just start typing in the box.")]),p.config.region="eu-west-1",p.config.credentials=new p.CognitoIdentityCredentials({IdentityPoolId:"eu-west-1:4dd4bbc0-1e62-4d33-bea9-386ed1873bbb"}),f(new p.LexRuntime)},[]),Object(n.useEffect)(function(){if(x){var e={botAlias:"expatty",botName:"Expatty_A",inputText:x,userId:y,sessionAttributes:h};d.postText(e,function(e,t){if(e&&console.error(e),t){console.log(t),b(t.sessionAttributes);var a=t.message.startsWith("{")?JSON.parse(t.message).messages.map(function(e){return e.value}):[t.message];O(a.map(function(e){return P(e)}))}})}},[x]),t.length&&function(){var e=t[0],n=t.slice(1);if("left"===e.position){if(o)return;a(n),u(!0);var r=setTimeout(function(){i([].concat(S.current,[e])),u(!1),clearTimeout(r),N(j.current.filter(function(e){return e!==r}))},e.text?40*e.text.length:200);N([].concat(v,[r]))}else a(n),u(!1),v.forEach(function(e){return clearInterval(e)}),i([].concat(c,[e])),k(e.text)}(),{dataSource:c,processInput:function(e){e&&a([{avatar:"https://cdn.iconscout.com/icon/free/png-256/avatar-369-456321.png",position:"right",title:"You:",type:"text",text:e}])},isTyping:o,sessionAttributes:h}},g=a(789),h=function(e){var t=e.onSearch,a=e.nbResults,c=f(),i=c.dataSource,s=c.processInput,l=c.isTyping,o=c.sessionAttributes,p=Object(n.useState)(!1),h=p[0],b=p[1],y=Object(n.useState)(!1),E=y[0],v=y[1],N=Object(n.useRef)(null),w=Object(n.useRef)(null),x=function(){s(N.current.value),N.current.value=""};return Object(n.useEffect)(function(){var e=document.querySelector("#is-typing");if(e&&e.remove(),l&&!document.querySelector("#is-typing")){var t=document.createElement("div");t.setAttribute("id","is-typing"),t.setAttribute("class","loading"),w.current.mlistRef.appendChild(t)}}),Object(n.useEffect)(function(){o.searchTerms&&t(o.searchTerms)},[o.searchTerms]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"chat"},r.a.createElement(u.MessageList,{ref:w,className:"message-list h-100",lockable:!0,toBottomHeight:"100%",dataSource:i})),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"input-group mt-5"},r.a.createElement("input",{ref:N,onKeyPress:function(e){return!(!e.shiftKey||13!==e.charCode)||(13===e.charCode?(x(),e.preventDefault(),!1):void 0)},type:"text",className:"form-control",placeholder:"Do a search or ask Patty...","aria-label":"Do a search or ask Patty","aria-describedby":"basic-addon2"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{title:"Just search",onClick:function(){N.current.value&&t(N.current.value)},className:"btn",type:"button",id:"searchBtn"},r.a.createElement(m.a,{icon:d.b})),r.a.createElement(g.a,{delay:{show:0,hide:0},placement:"bottom",isOpen:h,target:"searchBtn",toggle:function(){return b(!h)}},"Search only"),r.a.createElement("button",{title:"Ask Patty",onClick:x,className:"btn",type:"button",id:"chatBtn"},r.a.createElement(m.a,{icon:d.a})),r.a.createElement(g.a,{delay:{show:0,hide:0},placement:"bottom",isOpen:E,target:"chatBtn",toggle:function(){return v(!E)}},"Chat with Patty"))),null!=a&&r.a.createElement("small",{className:"form-text light-primary-colour"},a+" "+(1!==a?"results":"result")+" found (so far)")))},b=(a(762),a(151),a(74),a(75),a(764)),y=a(263),E=(a(196),a(166)),v=function(e){var t=e.title,a=e.description,n=e.icons,c=e.url;return r.a.createElement("div",{className:"row mb-3"},r.a.createElement("div",{className:"col-md"},r.a.createElement("h1",{className:"title--header small"},r.a.createElement("a",{className:"link light",href:c},t)),r.a.createElement("p",null,r.a.createElement("small",null,a)),r.a.createElement("p",null,n&&n.map(function(e,t){return r.a.createElement(E.a,{icon:e.icon,name:e.name,path:e.path,key:t})}))))},N=function(e){var t=e.query,a=e.onResults,c=Object(n.useState)(null),i=c[0],s=c[1],o=Object(n.useState)({}),u=o[0],m=o[1],d=Object(n.useState)(0),p=d[0],f=d[1],g=Object(n.useRef)(null);return Object(n.useEffect)(function(){var e=y("V2FZ8PQPU1","53dfa38126e32c85b534b72c3830168d");s(e.initIndex("expatty"))},[]),Object(n.useEffect)(function(){i&&t&&i.search({query:t,page:p,hitsPerPage:10},function(e,t){e?console.error(e):(g.current.scrollTop=0,m(t),a(t.nbHits))})},[t,p]),r.a.createElement(l.StaticQuery,{query:"2696684912",render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"search",ref:g},u.hits&&u.hits.map(function(t,a){var n=t.tags.map(function(t){return e.categories.edges.map(function(e){return e.node}).find(function(e){return e.frontmatter.tag===t})}).filter(function(e){return e}).map(function(e){return{icon:e.frontmatter.icon,name:e.frontmatter.name,path:e.fields.slug}});return r.a.createElement(v,{key:a,description:t.description,icons:n,url:t.url,title:t.title})})),u.nbPages&&u.nbPages>1?r.a.createElement("div",{className:"search-pagination"},r.a.createElement("nav",{className:"mt-5","aria-label":"Page navigation example"},r.a.createElement("ul",{className:"pagination justify-content-center"},p>0&&r.a.createElement("li",{className:"page-item"},r.a.createElement("button",{className:"page-link accent-colour","aria-label":"Previous",onClick:function(){return f(Math.max(0,p-1))}},r.a.createElement("span",{"aria-hidden":"true"},"«"),r.a.createElement("span",{className:"sr-only"},"Previous"))),new Array(u.nbPages).fill(null).map(function(e,t){return r.a.createElement("li",{key:t,className:"page-item"},r.a.createElement("button",{disabled:p===t,className:"page-link"+(p===t?" bold primary-colour":" accent-colour"),onClick:function(){return f(t)}},t+1))}),p<u.nbPages-1&&r.a.createElement("li",{className:"page-item"},r.a.createElement("button",{className:"page-link accent-colour","aria-label":"Next",onClick:function(){return f(Math.min(p+1,u.nbPages-1))}},r.a.createElement("span",{"aria-hidden":"true"},"»"),r.a.createElement("span",{className:"sr-only"},"Next")))))):void 0)},data:b})},w=function(e){var t=e.title,a=e.slogan,c=Object(n.useState)(null),i=c[0],s=c[1],l=Object(n.useState)(null),o=l[0],u=l[1];return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row hero"},r.a.createElement("div",{className:"col-lg-4 text-center"},r.a.createElement("div",{className:"align-middle"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xl-12 text-center mt-5"},r.a.createElement("h1",{style:{fontSize:"130px"}},"✈")),r.a.createElement("div",{className:"col-xl-12"},r.a.createElement("h1",{className:"display-1 title--header hero"},t),r.a.createElement("div",{className:"lead"},a))))),r.a.createElement("div",{className:"col-lg-4"},r.a.createElement(h,{onSearch:s,nbResults:o})),r.a.createElement("div",{className:"col-lg-4"},r.a.createElement(N,{query:i,onResults:u}))))};a.d(t,"pageQuery",function(){return x});t.default=function(e){var t=e.data.site.siteMetadata,a=t.title,n=t.slogan;return r.a.createElement(o,null,r.a.createElement(c.a,{title:"Home",keywords:["gatsby","application","react"]}),r.a.createElement("main",null,r.a.createElement(w,{title:a,slogan:n})))};var x="388200712"},147:function(e,t,a){"use strict";a.r(t),a.d(t,"graphql",function(){return f}),a.d(t,"StaticQueryContext",function(){return d}),a.d(t,"StaticQuery",function(){return p});var n=a(0),r=a.n(n),c=a(4),i=a.n(c),s=a(146),l=a.n(s);a.d(t,"Link",function(){return l.a}),a.d(t,"withPrefix",function(){return s.withPrefix}),a.d(t,"navigate",function(){return s.navigate}),a.d(t,"push",function(){return s.push}),a.d(t,"replace",function(){return s.replace}),a.d(t,"navigateTo",function(){return s.navigateTo});var o=a(149),u=a.n(o);a.d(t,"PageRenderer",function(){return u.a});var m=a(32);a.d(t,"parsePath",function(){return m.a});var d=r.a.createContext({}),p=function(e){return r.a.createElement(d.Consumer,null,function(t){return e.data||t[e.query]&&t[e.query].data?(e.render||e.children)(e.data?e.data.data:t[e.query].data):r.a.createElement("div",null,"Loading (StaticQuery)")})};function f(){throw new Error("It appears like Gatsby is misconfigured. Gatsby related `graphql` calls are supposed to only be evaluated at compile time, and then compiled away,. Unfortunately, something went wrong and the query was left in the compiled code.\n\n.Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.")}p.propTypes={data:i.a.object,query:i.a.string.isRequired,render:i.a.func,children:i.a.func}},149:function(e,t,a){var n;e.exports=(n=a(156))&&n.default||n},154:function(e,t,a){"use strict";var n=a(4),r=a.n(n),c=a(0),i=a.n(c),s=a(782),l=a(783),o=a(784),u=a(785),m=a(786),d=a(787),p=a(788),f=function(e){var t=e.siteTitle,a=e.showTitle,n=Object(c.useState)(!1),r=n[0],f=n[1];return i.a.createElement("header",null,i.a.createElement(s.a,{expand:"md",className:"navbar-dark bg-transparent"},a&&i.a.createElement(l.a,{href:"/"},i.a.createElement("h1",{className:"title--header brand"},t)),i.a.createElement(o.a,{className:"link light",onClick:function(){return f(!r)}}),i.a.createElement(u.a,{isOpen:r,navbar:!0},i.a.createElement(m.a,{className:"ml-auto",navbar:!0},i.a.createElement(d.a,null,i.a.createElement(p.a,{className:"link light",href:"/about/"},"About"))))))};f.propTypes={siteTitle:r.a.string},f.defaultProps={siteTitle:""},t.a=f},156:function(e,t,a){"use strict";a.r(t);a(33);var n=a(0),r=a.n(n),c=a(4),i=a.n(c),s=a(52),l=a(2),o=function(e){var t=e.location,a=l.default.getResourcesForPathnameSync(t.pathname);return r.a.createElement(s.a,Object.assign({location:t,pageResources:a},a.json))};o.propTypes={location:i.a.shape({pathname:i.a.string.isRequired}).isRequired},t.default=o},157:function(e,t,a){"use strict";var n=a(158),r=a(0),c=a.n(r),i=a(4),s=a.n(i),l=a(177),o=a.n(l),u=a(147);function m(e){var t=e.description,a=e.lang,r=e.meta,i=e.keywords,s=e.title;return c.a.createElement(u.StaticQuery,{query:d,render:function(e){var n=t||e.site.siteMetadata.description;return c.a.createElement(o.a,{htmlAttributes:{lang:a},title:s,titleTemplate:"%s | "+e.site.siteMetadata.title,meta:[{name:"description",content:n},{property:"og:title",content:s},{property:"og:description",content:n},{property:"og:type",content:"website"},{name:"twitter:card",content:"summary"},{name:"twitter:creator",content:e.site.siteMetadata.author},{name:"twitter:title",content:s},{name:"twitter:description",content:n}].concat(i.length>0?{name:"keywords",content:i.join(", ")}:[]).concat(r)})},data:n})}m.defaultProps={lang:"en",meta:[],keywords:[]},m.propTypes={description:s.a.string,lang:s.a.string,meta:s.a.array,keywords:s.a.arrayOf(s.a.string),title:s.a.string.isRequired},t.a=m;var d="1025518380"},158:function(e){e.exports={data:{site:{siteMetadata:{title:"expatty",description:"Your expat and travelling directory in Andalusia that helps you to find and pick interesting places, events and attractions in one search",author:"@expattydotcom"}}}}},166:function(e,t,a){"use strict";a(35),a(151);var n=a(0),r=a.n(n),c=a(147);t.a=function(e){var t=e.path,a=e.icon,n=e.name;return r.a.createElement(c.Link,{className:"link",to:t},r.a.createElement("span",{title:n,className:"tag-icons pr-2",dangerouslySetInnerHTML:{__html:a.map(function(e){return"&#x"+e.replace("U+","")}).join("")}}))}},196:function(e,t,a){"use strict";a(151);var n=a(0),r=a.n(n),c=a(147),i=a(166);t.a=function(e){var t=e.title,a=e.description,n=e.url,s=e.icons;return r.a.createElement("div",{className:"row listing"},r.a.createElement("div",{className:"col-md"},r.a.createElement("div",{className:"card mb-3"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title title--header dark small"},r.a.createElement(c.Link,{className:"link",to:n},t)),r.a.createElement("p",{className:"card-text"},a),r.a.createElement("p",null,s&&s.map(function(e,t){return r.a.createElement(i.a,{icon:e.icon,name:e.name,path:e.path,key:t})}))))))}},205:function(e,t){},326:function(e){e.exports={data:{site:{siteMetadata:{title:"expatty"}}}}},764:function(e){e.exports={data:{categories:{edges:[{node:{frontmatter:{tag:"Fishing",name:"Fishing",icon:["U+1F6C0"]},fields:{slug:"/categories/fishing/"}}},{node:{frontmatter:{tag:"Swimming",name:"Swimming",icon:["U+1F468","U+200D","U+1F469","U+200D","U+1F467","U+200D","U+1F467"]},fields:{slug:"/categories/swimming/"}}}]}}}}}]);
//# sourceMappingURL=component---src-pages-index-js-758c1fb8d87cd121cdcb.js.map